<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        div{
            position: fixed;
            left:0;
            right:0;
            top:0;
            bottom:0;
            margin: auto;
            background-color: red;
            width: 50px;
            height: 50px;
        }
    </style>
    <script src="./WebViewManager.js"></script>
    <script>
        window.onload=function () {
            var msgs = []
            var trans = Bridge.register("Image",function (data) {
                console.log("接收到消息",data);
                msgs.push(data)
                document.getElementById("but").innerText = JSON.stringify(msgs);
                return true;
            });
            var trans2 = Bridge.register("TEXT",function (data) {
                console.log("接收到消息",data);
                msgs.push(data)
                document.getElementById("but").innerText = JSON.stringify(msgs);
                return true;
            });
           document.getElementById("but").onclick=function () {
//               if(window.postMessage){
//                   window.postMessage("1111")
//               }
               trans.send("你猜呀1",function () {
                   console.log(1)
               });
               trans.send("你猜呀2",function () {
                   console.log(2)
               });
               trans.send("你猜呀3",function () {
                   console.log(3)
               });

               trans2.send("TEXT你猜呀1",function () {
                   console.log(11)
               });
               trans2.send("TEXT你猜呀2",function () {
                   console.log(22)
               });
               trans2.send("TEXT你猜呀3",function () {
                   console.log(33)
               });
           }

            document.addEventListener("message",Bridge.handleMessage);

//            window.document.addEventListener('message', function (ev) {
//                console.log(Bridge);
////                var txt = JSON.parse(ev.data);
//                document.getElementById("but").innerText = ev.data;
//            });
        }
    </script>
</head>
<body>
    <div id="but">AAA</div>
</body>
</html>